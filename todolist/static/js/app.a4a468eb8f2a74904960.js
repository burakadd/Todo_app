webpackJsonp([0],{"/wyC":function(e,t){},Hoo7:function(e,t){},NHnr:function(e,t,o){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var s=o("7+uW"),n={render:function(){var e=this.$createElement,t=this._self._c||e;return t("div",[t("router-view")],1)},staticRenderFns:[]};var r=o("VU/8")({name:"App"},n,!1,function(e){o("vSqF")},null,null).exports,a=o("/ocq"),i=o("7t+N"),u=o.n(i),d={name:"Login",data:function(){return{username:"",password:""}},methods:{goSignUp:function(){this.$router.replace({name:"Register"})},login:function(){var e=this;sessionStorage.setItem("username",this.username),u.a.ajax({url:"http://127.0.0.1:8000/token/",type:"POST",data:{username:this.username,password:this.password},success:function(t){alert("You were logged in"),sessionStorage.setItem("token",t.token),e.$router.replace({name:"Homepage"})},error:function(e){400===e.status&&alert("Wrong login or password")}})}}},c={render:function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("div",{staticClass:"login-form"},[o("h1",[e._v("Login")]),e._v(" "),o("div",{staticClass:"login"},[o("input",{directives:[{name:"model",rawName:"v-model",value:e.username,expression:"username"}],attrs:{type:"text",placeholder:"Username"},domProps:{value:e.username},on:{input:function(t){t.target.composing||(e.username=t.target.value)}}})]),e._v(" "),o("div",{staticClass:"login"},[o("input",{directives:[{name:"model",rawName:"v-model",value:e.password,expression:"password"}],attrs:{type:"password",placeholder:"Password"},domProps:{value:e.password},on:{input:function(t){t.target.composing||(e.password=t.target.value)}}})]),e._v(" "),o("button",{staticClass:"btn",on:{click:e.login}},[e._v("Sign in")]),e._v(" "),e._m(0)])},staticRenderFns:[function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"go-signup"},[this._v("\n    Don't have account? "),t("a",{attrs:{href:"/#/register"}},[this._v("Sign up")])])}]};var l=o("VU/8")(d,c,!1,function(e){o("eeI7")},"data-v-93c0d590",null).exports,p={name:"Register",data:function(){return{username:"",password:"",password2:""}},methods:{register:function(){var e=this;this.password===this.password2?u.a.ajax({url:"http://127.0.0.1:8000/register/",type:"POST",data:{username:this.username,password:this.password},success:function(t){alert("You were registered"),e.loginWhenRegistered()},error:function(e){400===e.status&&alert("Error")}}):alert("Password was not confirmed")},loginWhenRegistered:function(){var e=this;sessionStorage.setItem("username",this.username),u.a.ajax({url:"http://127.0.0.1:8000/token/",type:"POST",data:{username:this.username,password:this.password},success:function(t){sessionStorage.setItem("token",t.token),e.$router.replace({name:"Homepage"})}})}}},m={render:function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("div",{staticClass:"register-form",attrs:{autocomplete:"off"}},[o("h1",[e._v("Registration")]),e._v(" "),o("div",{staticClass:"register",attrs:{autocomplete:"off"}},[o("input",{directives:[{name:"model",rawName:"v-model",value:e.username,expression:"username"}],attrs:{type:"text",placeholder:"Username"},domProps:{value:e.username},on:{input:function(t){t.target.composing||(e.username=t.target.value)}}})]),e._v(" "),o("div",{staticClass:"register",attrs:{autocomplete:"off"}},[o("input",{directives:[{name:"model",rawName:"v-model",value:e.password,expression:"password"}],attrs:{type:"password",placeholder:"Password"},domProps:{value:e.password},on:{input:function(t){t.target.composing||(e.password=t.target.value)}}})]),e._v(" "),o("div",{staticClass:"register",attrs:{autocomplete:"off"}},[o("input",{directives:[{name:"model",rawName:"v-model",value:e.password2,expression:"password2"}],attrs:{type:"password",placeholder:"Confirm password"},domProps:{value:e.password2},on:{input:function(t){t.target.composing||(e.password2=t.target.value)}}})]),e._v(" "),o("button",{staticClass:"btn",on:{click:e.register}},[e._v("Sign up")]),e._v(" "),e._m(0)])},staticRenderFns:[function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"go-login"},[this._v("\n      Already a user? "),t("a",{attrs:{href:"/#/"}},[this._v("Sign in")])])}]};var v=o("VU/8")(p,m,!1,function(e){o("pwy7")},"data-v-19e893b7",null).exports,f={name:"TodoList",data:function(){return{todos:[],todoHeader:"",username:""}},created:function(){u.a.ajaxSetup({headers:{Authorization:"Token "+sessionStorage.getItem("token")}}),this.getTodoList(),this.setUsername()},computed:{notCompletedTodo:function(){return this.todos.filter(function(e){return!e.completed})},completedTodo:function(){return this.todos.filter(function(e){return e.completed})}},methods:{getTodoList:function(){var e=this;u.a.ajax({url:"http://127.0.0.1:8000/todo/",type:"GET",success:function(t){e.todos=t},error:function(e){400===e.status&&alert("Wrong login or password")}})},createTodo:function(){var e=this;u.a.ajax({url:"http://127.0.0.1:8000/todo/",type:"POST",data:{header:this.todoHeader},success:function(t){e.getTodoList(),e.todoHeader=""},error:function(e){alert(e.statusText)}})},deleteTodo:function(e){var t=this;u.a.ajax({url:"http://127.0.0.1:8000/todo/"+e+"/",type:"DELETE",success:function(e){t.getTodoList()},error:function(e){alert(e.statusText)}})},completeTodo:function(e){var t=this;u.a.ajax({url:"http://127.0.0.1:8000/todo/"+e+"/",type:"PATCH",data:{completed:"True"},success:function(e){t.getTodoList()},error:function(e){alert(e.statusText)}})},setUsername:function(){return this.username=sessionStorage.getItem("username"),this.username}}},g={render:function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("div",{staticClass:"todo"},[o("div",{staticClass:"todo-header"},[o("input",{directives:[{name:"model",rawName:"v-model",value:e.todoHeader,expression:"todoHeader"}],attrs:{type:"text",placeholder:"Add your todo"},domProps:{value:e.todoHeader},on:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.createTodo(t)},input:function(t){t.target.composing||(e.todoHeader=t.target.value)}}})]),e._v(" "),e.todos.length?e._e():o("h3",[e._v("Hey, "+e._s(e.username)+"! You have a lot to do for today. Let's write it down")]),e._v(" "),e.todos.filter(function(e){return!e.completed}).length?o("h3",[e._v("Not Completed")]):e._e(),e._v(" "),e._l(e.notCompletedTodo,function(t){return o("div",{key:t.id},[o("div",{staticClass:"task"},[o("span",{staticClass:"todo-text"},[e._v(e._s(t.header))]),e._v(" "),o("button",{on:{click:function(o){return e.deleteTodo(t.id)}}},[e._v("Delete")]),e._v(" "),o("button",{on:{click:function(o){return e.completeTodo(t.id)}}},[e._v("Complete")])])])}),e._v(" "),e.todos.filter(function(e){return e.completed}).length?o("h3",[e._v("Completed")]):e._e(),e._v(" "),e._l(e.completedTodo,function(t){return o("div",{key:t.id},[o("div",{staticClass:"completed-task"},[o("span",{staticClass:"todo-text"},[e._v(e._s(t.header))]),e._v(" "),o("button",{on:{click:function(o){return e.deleteTodo(t.id)}}},[e._v("Delete")])])])})],2)},staticRenderFns:[]};var h=o("VU/8")(f,g,!1,function(e){o("Hoo7")},null,null).exports,_={name:"Homepage",components:{Todolist:h},data:function(){return{}},computed:{isAuthorized:function(){if(sessionStorage.getItem("token"))return!0}},methods:{goLogin:function(){this.$router.replace({name:"Login"})},logout:function(){sessionStorage.removeItem("token"),sessionStorage.removeItem("username"),this.$router.replace({name:"Login"})}}},w={render:function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"homepage"},[t("div",[this.isAuthorized?t("button",{staticClass:"btn-logout",on:{click:this.logout}},[this._v("Log out")]):this._e(),this._v(" "),this.isAuthorized?t("Todolist"):this._e()],1)])},staticRenderFns:[]};var T=o("VU/8")(_,w,!1,function(e){o("/wyC")},null,null).exports;s.a.use(a.a);var y=new a.a({routes:[{path:"/register",name:"Register",component:v,props:!0},{path:"/",name:"Login",component:l,props:!0},{path:"/todolist",name:"Todolist",component:h,props:!0},{path:"/homepage",name:"Homepage",component:T,props:!0}]});s.a.config.productionTip=!1,new s.a({el:"#app",router:y,render:function(e){return e(r)}}).$mount("#app")},eeI7:function(e,t){},pwy7:function(e,t){},vSqF:function(e,t){}},["NHnr"]);
//# sourceMappingURL=app.a4a468eb8f2a74904960.js.map